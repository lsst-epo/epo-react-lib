import{g as M,_ as U,a as _}from"./i18nInstance-764935cb.js";import{a as z}from"./toPropertyKey-148bb9ef.js";import{r as l}from"./index-8db94870.js";import{I as k,R as H}from"./context-3d6b95f0.js";import{w as E,h as J,l as T,a as C}from"./utils-39e8b540.js";function K(e){if(Array.isArray(e))return e}function W(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,d,S,n,y=[],s=!0,f=!1;try{if(S=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(i=S.call(r)).done)&&(y.push(i.value),y.length!==t);s=!0);}catch(w){f=!0,d=w}finally{try{if(!s&&r.return!=null&&(n=r.return(),Object(n)!==n))return}finally{if(f)throw d}}return y}}function R(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Y(e,t){if(e){if(typeof e=="string")return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(e,t){return K(e)||W(e,t)||Y(e,t)||$()}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),r.push.apply(r,i)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(i){U(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}var B=function(t,r){var i=l.useRef();return l.useEffect(function(){i.current=r?i.current:t},[t,r]),i.current};function V(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.i18n,i=l.useContext(k)||{},d=i.i18n,S=i.defaultNS,n=r||d||_();if(n&&!n.reportNamespaces&&(n.reportNamespaces=new H),!n){E("You will need to pass in an i18next instance by using initReactI18next");var y=function(c,o){return typeof o=="string"?o:o&&z(o)==="object"&&typeof o.defaultValue=="string"?o.defaultValue:Array.isArray(c)?c[c.length-1]:c},s=[y,{},!1];return s.t=y,s.i18n={},s.ready=!1,s}n.options.react&&n.options.react.wait!==void 0&&E("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var f=j(j(j({},M()),n.options.react),t),w=f.useSuspense,I=f.keyPrefix,a=e||S||n.options&&n.options.defaultNS;a=typeof a=="string"?[a]:a||["translation"],n.reportNamespaces.addUsedNamespaces&&n.reportNamespaces.addUsedNamespaces(a);var m=(n.isInitialized||n.initializedStoreOnce)&&a.every(function(u){return J(u,n,f)});function g(){return n.getFixedT(t.lng||null,f.nsMode==="fallback"?a:a[0],I)}var L=l.useState(g),P=q(L,2),A=P[0],b=P[1],v=a.join();t.lng&&(v="".concat(t.lng).concat(v));var x=B(v),p=l.useRef(!0);l.useEffect(function(){var u=f.bindI18n,c=f.bindI18nStore;p.current=!0,!m&&!w&&(t.lng?T(n,t.lng,a,function(){p.current&&b(g)}):C(n,a,function(){p.current&&b(g)})),m&&x&&x!==v&&p.current&&b(g);function o(){p.current&&b(g)}return u&&n&&n.on(u,o),c&&n&&n.store.on(c,o),function(){p.current=!1,u&&n&&u.split(" ").forEach(function(O){return n.off(O,o)}),c&&n&&c.split(" ").forEach(function(O){return n.store.off(O,o)})}},[n,v]);var N=l.useRef(!0);l.useEffect(function(){p.current&&!N.current&&b(g),N.current=!1},[n,I]);var h=[A,n,m];if(h.t=A,h.i18n=n,h.ready=m,m||!m&&!w)return h;throw new Promise(function(u){t.lng?T(n,t.lng,a,function(){return u()}):C(n,a,function(){return u()})})}export{V as u};
