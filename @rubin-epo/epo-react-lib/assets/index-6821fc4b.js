import{j as z}from"./jsx-runtime-94f6e698.js";import{r as o,R as E}from"./index-8db94870.js";import{z as be}from"./index-d82f0c31.js";import{s as Q}from"./styled-components.browser.esm-3d9e3c21.js";import{u as S,o as W,p as ae,s as P,l as X,S as Ee,D as Y,y as ie,j as L,a as oe,b as F,t as re,c as ye,d as T,X as le,C as se}from"./open-closed-9da3c4c0.js";import{f as J}from"./use-is-mounted-ce5ca9dd.js";function we(e=0){let[t,r]=o.useState(e),n=J(),m=o.useCallback(l=>{n.current&&r(a=>a|l)},[t,n]),p=o.useCallback(l=>!!(t&l),[t]),c=o.useCallback(l=>{n.current&&r(a=>a&~l)},[r,n]),d=o.useCallback(l=>{n.current&&r(a=>a^l)},[r]);return{flags:t,addFlag:m,hasFlag:p,removeFlag:c,toggleFlag:d}}function Te(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function U(e,...t){e&&t.length>0&&e.classList.add(...t)}function K(e,...t){e&&t.length>0&&e.classList.remove(...t)}function Se(e,t){let r=W();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:m}=getComputedStyle(e),[p,c]=[n,m].map(l=>{let[a=0]=l.split(",").filter(Boolean).map(s=>s.includes("ms")?parseFloat(s):parseFloat(s)*1e3).sort((s,g)=>g-s);return a}),d=p+c;if(d!==0){r.group(a=>{a.setTimeout(()=>{t(),a.dispose()},d),a.addEventListener(e,"transitionrun",s=>{s.target===s.currentTarget&&a.dispose()})});let l=r.addEventListener(e,"transitionend",a=>{a.target===a.currentTarget&&(t(),l())})}else t();return r.add(()=>t()),r.dispose}function Fe(e,t,r,n){let m=r?"enter":"leave",p=W(),c=n!==void 0?Te(n):()=>{};m==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let d=S(m,{enter:()=>t.enter,leave:()=>t.leave}),l=S(m,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),a=S(m,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return K(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),U(e,...t.base,...d,...a),p.nextFrame(()=>{K(e,...t.base,...d,...a),U(e,...t.base,...d,...l),Se(e,()=>(K(e,...t.base,...d),U(e,...t.base,...t.entered),c()))}),p.dispose}function $e({immediate:e,container:t,direction:r,classes:n,onStart:m,onStop:p}){let c=J(),d=ae(),l=P(r);X(()=>{e&&(l.current="enter")},[e]),X(()=>{let a=W();d.add(a.dispose);let s=t.current;if(s&&l.current!=="idle"&&c.current)return a.dispose(),m.current(l.current),a.add(Fe(s,n.current,l.current==="enter",()=>{a.dispose(),p.current(l.current)})),a.dispose},[r])}function w(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let j=o.createContext(null);j.displayName="TransitionContext";var xe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(xe||{});function Le(){let e=o.useContext(j);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Ce(){let e=o.useContext(H);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let H=o.createContext(null);H.displayName="NestingContext";function M(e){return"children"in e?M(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ue(e,t){let r=P(e),n=o.useRef([]),m=J(),p=ae(),c=F((f,u=L.Hidden)=>{let v=n.current.findIndex(({el:i})=>i===f);v!==-1&&(S(u,{[L.Unmount](){n.current.splice(v,1)},[L.Hidden](){n.current[v].state="hidden"}}),p.microTask(()=>{var i;!M(n)&&m.current&&((i=r.current)==null||i.call(r))}))}),d=F(f=>{let u=n.current.find(({el:v})=>v===f);return u?u.state!=="visible"&&(u.state="visible"):n.current.push({el:f,state:"visible"}),()=>c(f,L.Unmount)}),l=o.useRef([]),a=o.useRef(Promise.resolve()),s=o.useRef({enter:[],leave:[],idle:[]}),g=F((f,u,v)=>{l.current.splice(0),t&&(t.chains.current[u]=t.chains.current[u].filter(([i])=>i!==f)),t==null||t.chains.current[u].push([f,new Promise(i=>{l.current.push(i)})]),t==null||t.chains.current[u].push([f,new Promise(i=>{Promise.all(s.current[u].map(([C,R])=>R)).then(()=>i())})]),u==="enter"?a.current=a.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(u)):v(u)}),b=F((f,u,v)=>{Promise.all(s.current[u].splice(0).map(([i,C])=>C)).then(()=>{var i;(i=l.current.shift())==null||i()}).then(()=>v(u))});return o.useMemo(()=>({children:n,register:d,unregister:c,onStart:g,onStop:b,wait:a,chains:s}),[d,c,n,g,b,s,a])}function Re(){}let ke=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ne(e){var t;let r={};for(let n of ke)r[n]=(t=e[n])!=null?t:Re;return r}function Ne(e){let t=o.useRef(ne(e));return o.useEffect(()=>{t.current=ne(e)},[e]),t}let Pe="div",de=Ee.RenderStrategy;function Oe(e,t){var r,n;let{beforeEnter:m,afterEnter:p,beforeLeave:c,afterLeave:d,enter:l,enterFrom:a,enterTo:s,entered:g,leave:b,leaveFrom:f,leaveTo:u,...v}=e,i=o.useRef(null),C=ie(i,t),R=(r=v.unmount)==null||r?L.Unmount:L.Hidden,{show:h,appear:$,initial:Z}=Le(),[x,V]=o.useState(h?"visible":"hidden"),ee=Ce(),{register:O,unregister:D}=ee;o.useEffect(()=>O(i),[O,i]),o.useEffect(()=>{if(R===L.Hidden&&i.current){if(h&&x!=="visible"){V("visible");return}return S(x,{hidden:()=>D(i),visible:()=>O(i)})}},[x,i,O,D,h,R]);let q=P({base:w(v.className),enter:w(l),enterFrom:w(a),enterTo:w(s),entered:w(g),leave:w(b),leaveFrom:w(f),leaveTo:w(u)}),A=Ne({beforeEnter:m,afterEnter:p,beforeLeave:c,afterLeave:d}),B=oe();o.useEffect(()=>{if(B&&x==="visible"&&i.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[i,x,B]);let me=Z&&!$,te=$&&h&&Z,ve=(()=>!B||me?"idle":h?"enter":"leave")(),N=we(0),pe=F(y=>S(y,{enter:()=>{N.addFlag(T.Opening),A.current.beforeEnter()},leave:()=>{N.addFlag(T.Closing),A.current.beforeLeave()},idle:()=>{}})),he=F(y=>S(y,{enter:()=>{N.removeFlag(T.Opening),A.current.afterEnter()},leave:()=>{N.removeFlag(T.Closing),A.current.afterLeave()},idle:()=>{}})),_=ue(()=>{V("hidden"),D(i)},ee);$e({immediate:te,container:i,classes:q,direction:ve,onStart:P(y=>{_.onStart(i,y,pe)}),onStop:P(y=>{_.onStop(i,y,he),y==="leave"&&!M(_)&&(V("hidden"),D(i))})});let k=v,ge={ref:C};return te?k={...k,className:re(v.className,...q.current.enter,...q.current.enterFrom)}:(k.className=re(v.className,(n=i.current)==null?void 0:n.className),k.className===""&&delete k.className),E.createElement(H.Provider,{value:_},E.createElement(ye,{value:S(x,{visible:T.Open,hidden:T.Closed})|N.flags},le({ourProps:ge,theirProps:k,defaultTag:Pe,features:de,visible:x==="visible",name:"Transition.Child"})))}function De(e,t){let{show:r,appear:n=!1,unmount:m=!0,...p}=e,c=o.useRef(null),d=ie(c,t);oe();let l=se();if(r===void 0&&l!==null&&(r=(l&T.Open)===T.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[a,s]=o.useState(r?"visible":"hidden"),g=ue(()=>{s("hidden")}),[b,f]=o.useState(!0),u=o.useRef([r]);X(()=>{b!==!1&&u.current[u.current.length-1]!==r&&(u.current.push(r),f(!1))},[u,r]);let v=o.useMemo(()=>({show:r,appear:n,initial:b}),[r,n,b]);o.useEffect(()=>{if(r)s("visible");else if(!M(g))s("hidden");else{let h=c.current;if(!h)return;let $=h.getBoundingClientRect();$.x===0&&$.y===0&&$.width===0&&$.height===0&&s("hidden")}},[r,g]);let i={unmount:m},C=F(()=>{var h;b&&f(!1),(h=e.beforeEnter)==null||h.call(e)}),R=F(()=>{var h;b&&f(!1),(h=e.beforeLeave)==null||h.call(e)});return E.createElement(H.Provider,{value:g},E.createElement(j.Provider,{value:v},le({ourProps:{...i,as:o.Fragment,children:E.createElement(ce,{ref:d,...i,...p,beforeEnter:C,beforeLeave:R})},theirProps:{},defaultTag:o.Fragment,features:de,visible:a==="visible",name:"Transition"})))}function Ae(e,t){let r=o.useContext(j)!==null,n=se()!==null;return E.createElement(E.Fragment,null,!r&&n?E.createElement(G,{ref:t,...e}):E.createElement(ce,{ref:t,...e}))}let G=Y(De),ce=Y(Oe),_e=Y(Ae),I=Object.assign(G,{Child:_e,Root:G});const je=(e,t)=>{o.useEffect(()=>(window.addEventListener(e,t),()=>window.removeEventListener(e,t)),[e,t])},He=e=>{je("keydown",e)},Me=(e,t)=>{o.useEffect(()=>{const r=n=>{!e.current||e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[e,t])},Ve=Q.div`
  --transition-time: calc(var(--slide-time, 0) + var(--slide-delay, 0));

  @media (prefers-reduced-motion: no-preference) {
    --slide-time: 400ms;
    --slide-delay: 200ms;
  }

  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: ${be.dialog};
`,qe=Q.div`
  background-color: var(--background-color, transparent);
  width: 100%;
  height: 100%;
  position: absolute;
  transition: background-color var(--slide-time, 0);
  transition-delay: var(--slide-delay, 0);

  &.closed {
    --background-color: transparent;
  }

  &.open {
    --background-color: rgba(0, 0, 0, var(--overlay-opacity, 0.9));

    @media (prefers-reduced-transparency: no-preference) {
      --overlay-opacity: 0.7;
    }
  }
`,Be=Q.div`
  position: absolute;
  transition: transform var(--slide-time, 0);
  &.closed {
    transform: var(--transform);
  }
  &.open {
    transform: translate(0, 0);
  }
`,ze=e=>{switch(e){case"left":return"-100%";case"right":return"100%";default:return"0"}},Ue=e=>{switch(e){case"top":return"-100%";case"bottom":return"100%";default:return"0"}},fe=({isOpen:e=!1,onOpenCallback:t,onCloseCallback:r,slideFrom:n="left",showBackground:m=!0,children:p})=>{const c=o.useRef(null),d=`translate(${ze(n)}, ${Ue(n)})`,l={[n]:0,[n==="bottom"||n==="top"?"width":"height"]:"100%"};function a(s){if(e){const{key:g}=s,f={Escape:()=>r&&r()}[g];f&&(s.preventDefault(),f())}}return Me(c,()=>r&&r()),He(a),z.jsxs(I,{as:Ve,show:e,afterEnter:()=>t&&t(),afterLeave:()=>r&&r(),"data-testid":"slideout",children:[m&&z.jsx(I.Child,{as:qe,role:"none",enterFrom:"closed",enter:"opening",enterTo:"open",leaveFrom:"open",leave:"closing",leaveTo:"closed"}),z.jsx(I.Child,{ref:c,as:Be,style:{"--transform":d,...l},enterFrom:"closed",enter:"opening",enterTo:"open",leaveFrom:"open",leave:"closing",leaveTo:"closed","data-testid":"slideoutContainer",children:p})]})};fe.displayName="Atomic.Slideout";const Ye=fe;try{Atomic.Slideout.displayName="Atomic.Slideout",Atomic.Slideout.__docgenInfo={description:"",displayName:"Atomic.Slideout",props:{isOpen:{defaultValue:{value:"false"},description:"",name:"isOpen",required:!1,type:{name:"boolean"}},onCloseCallback:{defaultValue:null,description:"",name:"onCloseCallback",required:!1,type:{name:"(() => void)"}},onOpenCallback:{defaultValue:null,description:"",name:"onOpenCallback",required:!1,type:{name:"(() => void)"}},slideFrom:{defaultValue:{value:"left"},description:"",name:"slideFrom",required:!1,type:{name:"enum",value:[{value:'"top"'},{value:'"right"'},{value:'"bottom"'},{value:'"left"'}]}},showBackground:{defaultValue:{value:"true"},description:"",name:"showBackground",required:!1,type:{name:"boolean"}}}}}catch{}export{Ye as S,He as u};
