import{s as W,j as t}from"./styled-components.browser.esm-e0114bd2.js";import{b as o}from"./index-f0f43cc6.js";import{r as c}from"./index-8db94870.js";import{a as $}from"./IconComposer-0a5b6514.js";import{B as T,E as F,P as K}from"./index-5e1eabf6.js";import{u as U}from"./useTranslation-fdd24caa.js";import{M as z}from"./Message-2934d254.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-12ae03d4.js";import"./utils-54f41c78.js";import"./Blinker-1e32d670.js";import"./index-aff813a1.js";import"./toNumber-d7724b6f.js";import"./isSymbol-f1e92ba4.js";import"./CircularLoader-50e78b89.js";import"./index-223833fa.js";import"./Controls-975788a2.js";import"./PlaybackControl-90cf0bb9.js";import"./ElapsedTime-d829c963.js";import"./Trans-b99fee83.js";import"./i18nInstance-764935cb.js";import"./toPropertyKey-148bb9ef.js";import"./utils-7aca7d2f.js";import"./context-3d6b95f0.js";import"./Point-cf4d0900.js";const G=W.div`
  position: relative;
  min-width: var(--BREAK_MOBILE_MIN, 280px);

  @media print {
    width: var(--BREAK_MOBILE_MIN, 280px);
  }
`,q=({width:e=600,height:u=600,selectedSource:l=[],sources:p,alerts:r=[],activeAlertIndex:a=0,alertChangeCallback:I,selectionCallback:y,blinkConfig:M,isDisplayOnly:d=!1,className:w})=>{const[N,j]=c.useState(!1),[D,f]=c.useState(),[B,g]=c.useState(!1),{t:b}=U(),S="sourceSelectorWidget",E=s=>{N&&!d&&(s?l.includes(s)||(y&&y(l.concat(s)),f(t.jsxs(t.Fragment,{children:[t.jsx($,{icon:"checkmark"}),b("source_selector.messages.success")]})),g(!0)):(f(b("source_selector.messages.failure")),g(!0)))},O=()=>{g(!1)},h=r[a].date-r[0].date,P=Math.round(h),L=Math.round(24/h%24)||0,R=d?[r[a].image]:r.map(({image:s})=>s);return t.jsxs(G,{style:{aspectRatio:`${e} / ${u}`},className:w,children:[!d&&t.jsx(z,{onMessageChangeCallback:O,isVisible:B,forIds:[S],children:D}),t.jsxs(T,{images:R,activeIndex:a,blinkCallback:I,loadedCallback:()=>j(!0),...M,children:[r.length>0&&!d&&t.jsx(F,{day:P,hour:L}),t.jsx(K,{id:S,onSelectCallback:E,width:e,height:u,sources:p,selectedSource:l})]})]})};q.displayName="Widgets.SourceSelector";const m=q;try{Widgets.SourceSelector.displayName="Widgets.SourceSelector",Widgets.SourceSelector.__docgenInfo={description:"",displayName:"Widgets.SourceSelector",props:{width:{defaultValue:{value:"600"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"600"},description:"",name:"height",required:!1,type:{name:"number"}},sources:{defaultValue:null,description:"",name:"sources",required:!0,type:{name:"Source[]"}},alerts:{defaultValue:{value:"[]"},description:"",name:"alerts",required:!1,type:{name:"Alert[]"}},selectedSource:{defaultValue:{value:"[]"},description:"",name:"selectedSource",required:!1,type:{name:"string[]"}},activeAlertIndex:{defaultValue:{value:"0"},description:"",name:"activeAlertIndex",required:!1,type:{name:"number"}},alertChangeCallback:{defaultValue:null,description:"",name:"alertChangeCallback",required:!1,type:{name:"((index: number) => void)"}},selectionCallback:{defaultValue:null,description:"",name:"selectionCallback",required:!1,type:{name:"((data: string[]) => void)"}},blinkConfig:{defaultValue:null,description:"",name:"blinkConfig",required:!1,type:{name:"BlinkConfig"}},isDisplayOnly:{defaultValue:{value:"false"},description:"",name:"isDisplayOnly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}try{PointSelector.displayName="PointSelector",PointSelector.__docgenInfo={description:"",displayName:"PointSelector",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},sources:{defaultValue:null,description:"",name:"sources",required:!0,type:{name:"Source[]"}},selectedSource:{defaultValue:null,description:"",name:"selectedSource",required:!0,type:{name:"string[]"}},onSelectCallback:{defaultValue:null,description:"",name:"onSelectCallback",required:!0,type:{name:"(id?: string | undefined) => void"}}}}}catch{}try{Message.displayName="Message",Message.__docgenInfo={description:"",displayName:"Message",props:{isVisible:{defaultValue:{value:"false"},description:"",name:"isVisible",required:!1,type:{name:"boolean"}},onMessageChangeCallback:{defaultValue:null,description:"",name:"onMessageChangeCallback",required:!0,type:{name:"() => void"}},forIds:{defaultValue:null,description:`list of ID's that contributed to this status message eg. if clicking on \\<svg id="mySvg"/> created a message, pass ['mySvg']`,name:"forIds",required:!1,type:{name:"string[]"}}}}}catch{}try{SelectionList.displayName="SelectionList",SelectionList.__docgenInfo={description:"",displayName:"SelectionList",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onRemoveCallback:{defaultValue:null,description:"",name:"onRemoveCallback",required:!0,type:{name:"(id: string) => void"}},sources:{defaultValue:{value:"[]"},description:"",name:"sources",required:!1,type:{name:"{ type: SourceType; id: string; }[]"}}}}}catch{}try{m.displayName="SourceSelector",m.__docgenInfo={description:"",displayName:"SourceSelector",props:{width:{defaultValue:{value:"600"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"600"},description:"",name:"height",required:!1,type:{name:"number"}},sources:{defaultValue:null,description:"",name:"sources",required:!0,type:{name:"Source[]"}},alerts:{defaultValue:{value:"[]"},description:"",name:"alerts",required:!1,type:{name:"Alert[]"}},selectedSource:{defaultValue:{value:"[]"},description:"",name:"selectedSource",required:!1,type:{name:"string[]"}},activeAlertIndex:{defaultValue:{value:"0"},description:"",name:"activeAlertIndex",required:!1,type:{name:"number"}},alertChangeCallback:{defaultValue:null,description:"",name:"alertChangeCallback",required:!1,type:{name:"((index: number) => void)"}},selectionCallback:{defaultValue:null,description:"",name:"selectionCallback",required:!1,type:{name:"((data: string[]) => void)"}},blinkConfig:{defaultValue:null,description:"",name:"blinkConfig",required:!1,type:{name:"BlinkConfig"}},isDisplayOnly:{defaultValue:{value:"false"},description:"",name:"isDisplayOnly",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const ke={argTypes:{width:{description:"Static width for the widget in pixels",control:{type:"number",min:0},table:{type:{summary:"number"},defaultValue:{summary:600},category:"Display"}},height:{description:"Static height for the widget in pixels",control:{type:"number",min:0},table:{type:{summary:"number"},defaultValue:{summary:600},category:"Display"}},sources:{type:{name:"other",value:"Source[]",required:!0},description:"Source objects for users to find, objects will be rendered as clickable points.",table:{type:{summary:"Source[]"},category:"Model"}},alerts:{type:{name:"other",value:"Alert[]",required:!0},description:"Associated alerts for the sources, can be used to show the elapsed time of the alerts.",table:{type:{summary:"Alert[]"},category:"Configuration"}},selectedSource:{control:"object",description:"Selected sources",table:{type:{summary:"string[]"},defaultValue:{summary:"[]"},category:"Model"}},selectionCallback:{description:"Callback for when users have found a new source.",action:"Source found",table:{type:{summary:"(selected: string[]) => void"},category:"Function"}},alertChangeCallback:{description:"Callback for when an alert changes.",action:"Alert changed",table:{type:{summary:"(index: number) => void"},category:"Function"}},blinkConfig:{description:"Additional configuration for the blinker including autoplay, loop, and duration.",table:{type:{summary:"{autoplay?: boolean; loop?: boolean; duration?: number}"},category:"Configuration"}},isDisplayOnly:{control:"boolean",description:"Puts the widget into a display only mode where users cannot click on new selections and the message is removed from the DOM. User's can still use alert playback controls.",table:{type:{summary:"boolean"},defaultValue:{summary:!1},category:"Display"}}},component:m},A=e=>{const[u,l]=c.useState(e.selectedSource||[]),[p,r]=c.useState(e.activeAlertIndex||0);return t.jsx(m,{...e,activeAlertIndex:p,selectedSource:u,selectionCallback:a=>{l(a),e.selectionCallback&&e.selectionCallback(a)},alertChangeCallback:a=>{r(a),e.alertChangeCallback&&e.alertChangeCallback(a)}})},n=A.bind({});n.args={sources:o.sources,alerts:o.alerts};const i=A.bind({});i.args={sources:o.sources,selectedSource:[o.sources[0].id],alerts:o.alerts,isDisplayOnly:!0};var C,k,v;n.parameters={...n.parameters,docs:{...(C=n.parameters)==null?void 0:C.docs,source:{originalSource:`args => {
  const [selectedSource, setSelectedSource] = useState(args.selectedSource || []);
  const [activeAlertIndex, setActiveAlertIndex] = useState(args.activeAlertIndex || 0);
  return <SourceSelector {...args} {...{
    activeAlertIndex,
    selectedSource
  }} selectionCallback={sources => {
    setSelectedSource(sources);
    args.selectionCallback && args.selectionCallback(sources);
  }} alertChangeCallback={index => {
    setActiveAlertIndex(index);
    args.alertChangeCallback && args.alertChangeCallback(index);
  }} />;
}`,...(v=(k=n.parameters)==null?void 0:k.docs)==null?void 0:v.source}}};var _,V,x;i.parameters={...i.parameters,docs:{...(_=i.parameters)==null?void 0:_.docs,source:{originalSource:`args => {
  const [selectedSource, setSelectedSource] = useState(args.selectedSource || []);
  const [activeAlertIndex, setActiveAlertIndex] = useState(args.activeAlertIndex || 0);
  return <SourceSelector {...args} {...{
    activeAlertIndex,
    selectedSource
  }} selectionCallback={sources => {
    setSelectedSource(sources);
    args.selectionCallback && args.selectionCallback(sources);
  }} alertChangeCallback={index => {
    setActiveAlertIndex(index);
    args.alertChangeCallback && args.alertChangeCallback(index);
  }} />;
}`,...(x=(V=i.parameters)==null?void 0:V.docs)==null?void 0:x.source}}};const ve=["Primary","DisplayOnly"];export{i as DisplayOnly,n as Primary,ve as __namedExportsOrder,ke as default};
